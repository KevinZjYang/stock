# 股票基金监控系统

一个基于 Flask 的股票和基金实时监控系统，支持多市场数据获取、价格提醒、交易记录管理等功能。

## 项目简介

这是一个功能丰富的投资辅助工具，旨在帮助投资者实时监控股票和基金的价格变动，提供价格提醒功能，并支持基金交易记录的管理和收益统计分析。系统支持A股、港股、美股等多个市场，具有直观的Web界面和灵活的配置选项。

## 功能特性

- **多市场股票监控**：支持A股、港股、美股及各大指数的实时价格监控
- **基金净值追踪**：实时获取基金单位净值、估算净值及各项收益率指标
- **智能价格提醒**：设置价格变动提醒，支持价格阈值、涨跌幅等多种条件
- **企业微信通知**：价格变动时自动推送企业微信消息提醒
- **基金交易记录管理**：完整的基金买卖记录录入、编辑、删除功能
- **Excel导入导出**：支持交易记录的Excel批量导入和导出
- **收益统计分析**：自动计算持仓成本、已实现收益、费用统计等
- **数据缓存机制**：优化API调用频率，提升响应速度
- **响应式界面**：适配桌面和移动设备的现代化UI设计

## 安装说明

### 环境要求

- Python 3.7+
- Windows/Linux/macOS

### 安装步骤

1. 克隆项目到本地：
   ```bash
   git clone https://github.com/yourusername/stock.git
   cd stock
   ```

2. 创建虚拟环境（推荐）：
   ```bash
   python -m venv venv
   # Windows
   venv\Scripts\activate
   # Linux/macOS
   source venv/bin/activate
   ```

3. 安装依赖包：
   ```bash
   pip install -r requirements.txt
   ```

4. 启动应用：
   ```bash
   python app.py
   ```

5. 打开浏览器访问 `http://localhost:3333`

## 使用说明

### 股票监控

1. 在股票页面输入股票代码或名称进行搜索
2. 从搜索结果中选择目标股票并点击"添加"
3. 股票将被添加到关注列表，实时显示价格变动
4. 可以随时删除不再关注的股票

### 基金监控

1. 在基金页面输入基金代码或名称进行搜索
2. 从搜索结果中选择目标基金并点击"添加"
3. 基金将被添加到关注列表，显示净值和各项收益率
4. 可以随时删除不再关注的基金

### 价格提醒设置

1. 进入价格提醒页面
2. 设置提醒条件（价格高于/低于某个值、涨跌幅超过某个百分比等）
3. 配置企业微信机器人Webhook地址
4. 系统将在满足条件时自动发送提醒消息

### 基金交易记录管理

1. 进入基金交易记录页面
2. 点击"添加记录"录入交易信息（日期、基金代码、名称、金额、份额等）
3. 支持Excel文件批量导入交易记录
4. 系统自动计算投资收益和费用统计

## 配置说明

### 数据源配置

- 股票数据来源于雪球网API
- 基金数据来源于第三方基金API
- 系统会自动从Excel文件导入股票代码数据

### 数据存储

- 所有数据存储在SQLite数据库中（`data/stock_fund.db`）
- 交易记录、关注列表等数据持久化保存
- 支持从旧版JSON文件迁移数据

### 缓存策略

- 实时数据缓存5分钟，减少API调用频率
- 智能缓存机制，仅在页面可见时更新数据

## 注意事项

- 本系统仅供个人投资参考，不构成投资建议
- API数据来源可能因网络或服务商策略变化而失效
- 价格提醒功能依赖企业微信机器人，需自行配置Webhook地址
- 基金交易记录功能仅用于个人记录，不保证数据准确性
- 请定期备份交易记录数据，以防数据丢失
- 系统默认运行在3333端口，如需修改可在app.py中调整

## 开发说明

### 项目结构

```
stock/
├── app.py                 # 主应用入口
├── stock_module.py        # 股票模块
├── fund.py               # 基金模块
├── fund_trans.py         # 基金交易模块
├── requirements.txt      # 依赖包列表
├── templates/            # 前端模板文件
├── data/                 # 数据存储目录
├── logs/                 # 日志文件目录
└── README.md
```

### API接口

- `/api/stock/*` - 股票相关接口
- `/api/fund/*` - 基金相关接口
- `/api/fund_trans/*` - 基金交易相关接口
- `/api/notifications/*` - 价格提醒相关接口

## 贡献

欢迎提交Issue和Pull Request来改进本项目。

## 许可证

本项目采用 MIT 许可证。